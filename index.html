<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAAT LANG DOCS</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="hero">
        <div class="logo1" style=" display: flex; justify-content: center;"><img src="logotext.png" alt=""></div>
        <div class="moustache" style=" display: flex; background: transparent; justify-content: center; position: relative; top: 0px;"><img src="mooch.png" style="height: 280px; width: 40%;" alt="">
      
        </div>
          <div style="display: flex; text-align: center; color: aliceblue; font-size: 30px; font-family: cursive; justify-content: center;">Jaat Lang is a fun, desi-style programming language inspired by Haryanvi culture.</div>
       <div class="documentation">
    <div class="exCODE">
      <div class="box-heading">main.jaat:</div>
      <pre>
tha le a = 10
tha le b = 20
tha le sum = a + b
suna de sum
likh de namaste
      </pre>
    </div>
    <div class="keywords">
      <div class="box-heading">Translated to JavaScript:</div>
      <pre>
let a = 10;
let b = 20;
let sum = a + b;
console.log(sum);
console.log("namaste");
      </pre>
    </div>
  </div>

  <div class="howto">How to Start?</div>
  <div class="setup-section">
    <div class="command-box">
      <pre>
        <h1 style="color: yellow;">
npm init -y</h1>
(change "type" to "module" in package.json)
<br>
<h1>GitHub Repo Link:</h1>
<a href="https://github.com/eklavyapopli-ship-it/JAAT-LANG" target="_blank" style="text-decoration: none; color: yellow;"> Click Here</a>
      </pre>
    </div>
    <div class="file-box">
      <div class="file-heading">index.js</div>
      <pre>
import fs from "fs";

// Bhai yo se Lexer, thara code ye hi todega


function lexer(input) {
    const tokens = [];

    const lines = input.split('\n')
    for (let line of lines) {
        let cursor = 0;
        if (line.startsWith('tha le')) {
            tokens.push({ type: 'keyword', value: "tha le" });
            cursor += 6
        }
        else if (line.startsWith('suna de')) {
            tokens.push({ type: 'keyword', value: "suna de" });
            cursor += 7
        }
        else if (line.startsWith('likh de')) {
            tokens.push({ type: 'keyword', value: "likh de" });
            cursor += 7
            while (cursor < line.length) {
                let char1 = line[cursor];
                if (/\s/.test(char1)) {
                    cursor++;
                };
                if (/[a-zA-Z]/.test(char1)) {
                    let word1 = '';
                    let lineString = [];
                    while (cursor < line.length && /[a-zA-Z0-9]/.test(char1)) {
                        word1 += char1;
                        char1 = line[++cursor];
                    }
                    tokens.push({ type: 'string', value: word1 });

                }
            }
        }

        while (cursor < line.length) {
            let char = line[cursor];
            if (/\s/.test(char)) {
                cursor++;
                continue;
            }
            if (/[a-zA-Z]/.test(char)) {
                let word = '';

                while (cursor < line.length && /[a-zA-Z0-9]/.test(char)) {
                    word += char;
                    char = line[++cursor];
                }
                tokens.push({ type: 'identifier', value: word });
                continue;

            }

            if (/[\+\-\*\/=]/.test(char)) {


                tokens.push({ type: 'operator', value: char });
                cursor++

                continue;
            }
            if (/[0-9]/.test(char)) {
                let num = '';
                while (/[0-9]/.test(char)) {
                    num += char;
                    char = line[++cursor];

                }
                tokens.push({ type: 'number', value: parseInt(num) });
                continue;
            }

        }
    }

    return tokens;

}

// Ar yo se thara parser, ye thare code ka Absract Syntax Tree banauga 

function parser(tokens) {
    const ast = {
        type: 'Program',
        body: []

    }
    while (tokens.length > 0) {
        let token = tokens.shift();
        if (token.type === 'keyword' && token.value === "tha le") {
            let declaration = {
                type: 'Declaration',
                name: tokens.shift().value,
                value: null
            };
            if (tokens[0].type === 'operator' && tokens[0].value === '=') {
                tokens.shift();
                let expression = '';
                while (tokens.length > 0 && tokens[0].type !== 'keyword') {
                    expression += tokens.shift().value;

                }
                declaration.value = expression.trim();
            }
            ast.body.push(declaration);
        }
        if (token.type === 'keyword' && token.value === "suna de") {
            ast.body.push({
                type: 'Print',
                expression: tokens.shift().value
            });

        };
        if (token.type === 'keyword' && token.value === "likh de") {
            let seperator = " ";
            let arrOf = [];
            for (let i = 0; i < tokens.length; i++) {
                arrOf.push(tokens[i].value)

            }
            let resString = arrOf.join(" ");
            ast.body.push({
                type: 'Print string',
                expression: resString,
            });
        }




    }
    return ast;


}

// Ar ye thare code jo javascript mei jotega jaise tham hooka jotte ho
function codeGen(node) {
    switch (node.type) {
        case 'Program': return node.body.map(codeGen).join('\n');
        case 'Declaration': return `const ${node.name}=${node.value}`;
        case 'Print': return `console.log(${node.expression})`;
        case 'Print string': return `console.log("${node.expression}")`;


    }


}
// ib auga compiler

function compiler(input) {
    const tokens = lexer(input);
    const ast = parser(tokens)
    const execCode = codeGen(ast)

    return execCode
}
// ar ye thare code ka starter h 
function runner(input) {
    eval(input)
}
// Aakhri kaam
const code = fs.readFileSync('./main.jaat', 'utf-8')
compiler(code)
const exec = compiler(code)
runner(exec)

      </pre>
    </div>
    <div class="file-box">
      <div class="file-heading">main.jaat</div>
      <pre>
tha le a = 10
tha le b = 20
tha le sum = a+b
suna de sum
likh de namaste
      </pre>
    </div>
  </div>

</body>
</html>